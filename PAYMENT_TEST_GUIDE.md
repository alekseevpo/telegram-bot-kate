# üí≥ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ø–ª–∞—Ç–µ–∂–µ–π –Æ–ö–∞—Å—Å–∞

## üß™ –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º

–ë–æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å **—Ç–µ—Å—Ç–æ–≤—ã–º —Ç–æ–∫–µ–Ω–æ–º –ø–ª–∞—Ç–µ–∂–µ–π**, –ø–æ—ç—Ç–æ–º—É:
- ‚úÖ –í—Å–µ –ø–ª–∞—Ç–µ–∂–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–µ–∑–æ–ø–∞—Å–Ω—ã
- ‚úÖ –î–µ–Ω—å–≥–∏ –ù–ï —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è
- ‚úÖ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã
- ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å –∏–¥–µ–Ω—Ç–∏—á–µ–Ω —Ä–µ–∞–ª—å–Ω—ã–º –ø–ª–∞—Ç–µ–∂–∞–º

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞ –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/mybots`
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
4. –ù–∞–∂–º–∏—Ç–µ **"Payments"**
5. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–Æ–ö–∞—Å—Å–∞)
6. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
7. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞

–í `bot_test.py` (–∏–ª–∏ `bot.py` –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞) –∑–∞–º–µ–Ω–∏—Ç–µ:

```python
TEST_PAYMENT_TOKEN = "381764678:TEST:99999"  # –¢–µ—Å—Ç–æ–≤—ã–π
```

–ù–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω:

```python
TEST_PAYMENT_TOKEN = "–í–ê–®_–†–ï–ê–õ–¨–ù–´–ô_–¢–û–ö–ï–ù_–û–¢_BOTFATHER"
```

---

## üß™ –¢–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ –∫–∞—Ä—Ç—ã:

### ‚úÖ –£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞
```
–ù–æ–º–µ—Ä: 4242 4242 4242 4242
–°—Ä–æ–∫: –õ—é–±–∞—è –±—É–¥—É—â–∞—è –¥–∞—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 12/25)
CVC: –õ—é–±—ã–µ 3 —Ü–∏—Ñ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, 123)
```

### ‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–Ω–∞—è –æ–ø–ª–∞—Ç–∞
```
–ù–æ–º–µ—Ä: 4000 0000 0000 0002
–°—Ä–æ–∫: –õ—é–±–∞—è –±—É–¥—É—â–∞—è –¥–∞—Ç–∞
CVC: –õ—é–±—ã–µ 3 —Ü–∏—Ñ—Ä—ã
```

### ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
```
–ù–æ–º–µ—Ä: 4000 0027 6000 3184
–°—Ä–æ–∫: –õ—é–±–∞—è –±—É–¥—É—â–∞—è –¥–∞—Ç–∞
CVC: –õ—é–±—ã–µ 3 —Ü–∏—Ñ—Ä—ã
```

---

## üì± –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –±–æ—Ç–∞

```bash
cd /Users/ppmtrue/Documents/GitHub/telegram-bot-kate
python3 bot_test.py
```

### –®–∞–≥ 2: –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram

1. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –±–æ—Ç–∞
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –ü—Ä–æ–π–¥–∏—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é

### –®–∞–≥ 3: –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç

1. –ù–∞–∂–º–∏—Ç–µ **"üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"**
2. –ù–∞–∂–º–∏—Ç–µ **"üíé –ü—Ä–æ–¥—É–∫—Ç—ã"**
3. –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π –ø—Ä–æ–¥—É–∫—Ç

### –®–∞–≥ 4: –û–ø–ª–∞—Ç–∏—Ç–µ

1. –û—Ç–∫—Ä–æ–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ –æ–ø–ª–∞—Ç—ã
2. –í–≤–µ–¥–∏—Ç–µ:
   - üìß **Email**: test@example.com
   - üì± **–¢–µ–ª–µ—Ñ–æ–Ω**: +79991234567
   - üë§ **–ò–º—è**: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤
3. –ù–∞–∂–º–∏—Ç–µ **"–û–ø–ª–∞—Ç–∏—Ç—å"**
4. –í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤–æ–π –∫–∞—Ä—Ç—ã (—Å–º. –≤—ã—à–µ)
5. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –æ–ø–ª–∞—Ç—É

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:

```
‚úÖ –û–ø–ª–∞—Ç–∞ —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω–∞!

üéâ –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É!

üì¶ –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞:
üÜî –ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞: #1
üíé –ü—Ä–æ–¥—É–∫—Ç: –ë–∞–∑–æ–≤—ã–π –∫—É—Ä—Å
üí∞ –°—É–º–º–∞: 5000 —Ä—É–±.

üìß –ú—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ email: test@example.com
üì± –¢–∞–∫–∂–µ —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É: +79991234567

üéì –î–æ—Å—Ç—É–ø –∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º –±—É–¥–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç.
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

–ó–∞–∫–∞–∑—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `orders`:

```bash
sqlite3 test_bot_database.db "SELECT * FROM orders;"
```

–í—ã —É–≤–∏–¥–∏—Ç–µ:
- ID –∑–∞–∫–∞–∑–∞
- ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°—É–º–º—É
- –°—Ç–∞—Ç—É—Å (paid)
- –î–∞—Ç—É
- –î–∞–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∞ (JSON)

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "Bad Request: PROVIDER_INVALID"

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ `bot_test.py`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
3. –î–ª—è —Ç–µ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `"381764678:TEST:99999"`

### –ö–Ω–æ–ø–∫–∞ "–û–ø–ª–∞—Ç–∏—Ç—å" –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞**: –ë–æ—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–ª–∞—Ç–µ–∂–∏

**–†–µ—à–µ–Ω–∏–µ**:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ payment_handler –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

### –ü–ª–∞—Ç–µ–∂ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç

**–ü—Ä–∏—á–∏–Ω–∞**: –û—à–∏–±–∫–∞ –≤ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç—ã

**–†–µ—à–µ–Ω–∏–µ**:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã –∏–∑ —Å–ø–∏—Å–∫–∞ –≤—ã—à–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –±—É–¥—É—â–µ–º)
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–≤–µ–ª–∏ –≤—Å–µ –ø–æ–ª—è

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–ª–∞—Ç–µ–∂–µ–π

### –í –ª–æ–≥–∞—Ö –±–æ—Ç–∞

–í—ã —É–≤–∏–¥–∏—Ç–µ:
```
INFO - –ò–Ω–≤–æ–π—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é 123456 –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∞ 1
INFO - Pre-checkout –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω –¥–ª—è 123456
INFO - –£—Å–ø–µ—à–Ω—ã–π –ø–ª–∞—Ç–µ–∂ –æ—Ç 123456: –∑–∞–∫–∞–∑ #1, –ø—Ä–æ–¥—É–∫—Ç 1
```

### –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

```bash
# –í—Å–µ –∑–∞–∫–∞–∑—ã
sqlite3 test_bot_database.db "SELECT * FROM orders;"

# –ó–∞–∫–∞–∑—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sqlite3 test_bot_database.db "SELECT * FROM orders WHERE user_id = 257398062;"
```

---

## üöÄ –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏

### 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π —Å—á–µ—Ç –Æ–ö–∞—Å—Å—ã

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [yookassa.ru](https://yookassa.ru)
2. –ü—Ä–æ–π–¥–∏—Ç–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é
3. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã API

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather

1. `/mybots` ‚Üí –í–∞—à –±–æ—Ç ‚Üí **Payments**
2. –í—ã–±–µ—Ä–∏—Ç–µ **–Æ–ö–∞—Å—Å–∞**
3. –í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –Æ–ö–∞—Å—Å—ã
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

### 3. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥

–ó–∞–º–µ–Ω–∏—Ç–µ `TEST_PAYMENT_TOKEN` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω

### 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ**: –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ —Å–ø–∏—Å–∞–Ω–∏—è –±—É–¥—É—Ç –Ω–∞—Å—Ç–æ—è—â–∏–º–∏!

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Telegram Payments API](https://core.telegram.org/bots/payments)
- [–Æ–ö–∞—Å—Å–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://yookassa.ru/developers)
- [–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –Æ–ö–∞—Å—Å—ã](https://yookassa.ru/developers/payment-acceptance/testing-and-going-live/testing)
- [@BotFather](https://t.me/BotFather)

---

## ‚úÖ Checklist –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

- [ ] –¢–æ–∫–µ–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞
- [ ] –¢–µ—Å—Ç–æ–≤–∞—è –æ–ø–ª–∞—Ç–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ
- [ ] –ó–∞–∫–∞–∑—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- [ ] Email –∏ —Ç–µ–ª–µ—Ñ–æ–Ω —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

---

**üéâ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –≤–∞—à –±–æ—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–ª–∞—Ç–µ–∂–∏ —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å—É!**

